{% extends "base.html" %}
{% block content %}

<h2 style="margin:6px 0 12px;">
  Resultados — {{ season or '' }}
</h2>

<form method="get" action="/results" style="margin-bottom:12px; display:flex; gap:12px; flex-wrap:wrap; align-items:center;">
  <label>Temporada:
    <select name="season" onchange="this.form.submit()">
      {% for s in seasons %}
        <option value="{{ s }}" {% if season==s %}selected{% endif %}>{{ s }}</option>
      {% endfor %}
    </select>
  </label>
  <noscript><button type="submit">Ver</button></noscript>
</form>

{% if rows and rows|length>0 %}
<div class="table-outer">
  <table class="grid">
    <colgroup>
      <col class="col-date">
      <col class="col-div">
      <col class="col-name">
      <col class="col-name">
      <col class="col-num">
      <col class="col-num"><col class="col-num">
      <col class="col-num"><col class="col-num">
      <col class="col-num"><col class="col-num">
      <col class="col-num"><col class="col-num">
      <col class="col-num"><col class="col-num">
    </colgroup>
    <thead>
      <tr>
        <th>Fecha</th>
        <th>División</th>
        <th>Jugador 1</th>
        <th>Jugador 2</th>
        <th>Resultado<br>en SETS</th>
        <th>S1–J1</th><th>S1–J2</th>
        <th>S2–J1</th><th>S2–J2</th>
        <th>S3–J1</th><th>S3–J2</th>
        <th>S4–J1</th><th>S4–J2</th>
        <th>S5–J1</th><th>S5–J2</th>
      </tr>
    </thead>
    <tbody>
      {% for r in rows %}
      <tr>
        <td>{{ r.date or r.fecha or '' }}</td>
        <td>{{ r.division or '' }}</td>
        <td>{{ r.name1 or r.j1 or r.player1 or r.jugador1 or '' }}</td>
        <td>{{ r.name2 or r.j2 or r.player2 or r.jugador2 or '' }}</td>
        <td>{{ r.result_sets or r.resumen_sets or '' }}</td>

        <td>{{ r.s1_j1 or r.s1j1 or '' }}</td>
        <td>{{ r.s1_j2 or r.s1j2 or '' }}</td>

        <td>{{ r.s2_j1 or r.s2j1 or '' }}</td>
        <td>{{ r.s2_j2 or r.s2j2 or '' }}</td>

        <td>{{ r.s3_j1 or r.s3j1 or '' }}</td>
        <td>{{ r.s3_j2 or r.s3j2 or '' }}</td>

        <td>{{ r.s4_j1 or r.s4j1 or '' }}</td>
        <td>{{ r.s4_j2 or r.s4j2 or '' }}</td>

        <td>{{ r.s5_j1 or r.s5j1 or '' }}</td>
        <td>{{ r.s5_j2 or r.s5j2 or '' }}</td>
      </tr>
      {% endfor %}
    </tbody>
  </table>
</div>
{% else %}
<p>No hay resultados para esta temporada.</p>
{% endif %}

{% endblock %}
