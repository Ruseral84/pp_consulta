{% extends "base.html" %}
{% block title %}Clasificación{% endblock %}

{% block content %}

<h1 class="page-title">Clasificación —</h1>

<form method="get" action="/standings" class="filters">
  <label>Temporada:</label>
  <select name="season" onchange="this.form.submit()" class="select-wide">
    {% for s in seasons %}
      <option value="{{ s }}" {% if s == season %}selected{% endif %}>{{ s }}</option>
    {% endfor %}
  </select>

  <label>División:</label>
  <select name="division" onchange="this.form.submit()" class="select-wide" {% if show_general %}disabled{% endif %}>
    {% if show_general %}
      <option value="">—</option>
    {% else %}
      {% for d in divisions %}
        <option value="{{ d }}" {% if d == division %}selected{% endif %}>{{ d }}</option>
      {% endfor %}
    {% endif %}
  </select>
</form>

<table class="table table-dark table-striped table-compact">
  <thead>
    <tr>
      <th class="text-center">#</th>
      <th>Jugador</th>

      {% if show_general %}
        <th class="text-center">Puntos liga</th>
        <th class="text-center">V</th>
      {% else %}
        <th class="text-center">PJ</th>
        <th class="text-center">V</th>
        <th class="text-center">ΔSets</th>
        <th class="text-center">ΔPuntos</th>
      {% endif %}
    </tr>
  </thead>
  <tbody>
    {% for row in rows %}
      <tr>
        <td class="text-center">{{ loop.index }}</td>
        <td>{{ row.jugador }}</td>

        {% if show_general %}
          <td class="text-center">{{ row.PUNTOS_LIGA }}</td>
          <td class="text-center">{{ row.V }}</td>
        {% else %}
          <td class="text-center">{{ row.PJ }}</td>
          <td class="text-center">{{ row.V }}</td>
          <td class="text-center">{{ row.dsets }}</td>
          <td class="text-center">{{ row.dpuntos }}</td>
        {% endif %}
      </tr>
    {% endfor %}
  </tbody>
</table>

<style>
  .filters { display:flex; gap:14px; align-items:center; margin-bottom:14px; }
  .select-wide { min-width: 210px; }
  .table-compact th, .table-compact td { padding: 8px 12px; }
  .text-center { text-align:center; }
  .page-title { margin: 18px 0 6px; }
  .tiny { font-size: 12px; }
  .muted { color: #9aa0a6; }
</style>

{% endblock %}
